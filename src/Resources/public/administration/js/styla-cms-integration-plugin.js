!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/bundles/administration/",n(n.s="JXqQ")}({"/z1L":function(e,t){e.exports='{% block styla_pages_listing %}\n    <sw-page class="overdose-contact-list">\n        <template #smart-bar-actions> {# slots check vue.js documentation #}\n            <div v-if="lastSuccessSynchronizationDate" style="margin-top: 10px">\n                <sw-label variant="info" :dismissable="false">\n                    {{ $tc(\'styla-cms-integration-plugin.actions.get-last-success-date.text\', 0, {\'dateTime\': lastSuccessSynchronizationDate}) }}\n                </sw-label>\n            </div>\n            <sw-button-process variant="ghost"\n                               :isLoading="scheduleSynchronizationProcessing"\n                               :processSuccess="scheduleSynchronizationSuccess"\n                               @process-finish="resetScheduleSynchronizationState"\n                               @click="scheduleSynchronization"\n            >\n                {{ $tc(\'styla-cms-integration-plugin.actions.schedule-pages-synchronization.button.label\') }}\n            </sw-button-process>\n        </template>\n        <template #content>\n            <sw-entity-listing\n                v-if="pages"\n                :items="pages"\n                :repository="repository"\n                :showSelection="false"\n                :allowColumnEdit="false"\n                :allowDelete="false"\n                :allowEdit="false"\n                :columns="columns">\n                <template #actions="{ item }">\n                    <sw-context-menu-item @click="refreshPageDetails(item)">\n                        {{ $tc(\'styla-cms-integration-plugin.actions.refresh-page-details.button.label\') }}\n                    </sw-context-menu-item>\n                </template>\n\n                <template v-slot:column-path="{item, column, url}">\n                    <a v-bind:href="computePathLink(item)" v-if="computePathLink(item)" target="_blank"> {{ computePathLink(item) }} </a>\n                    <span v-else>{{ item.path }}</span>\n                </template>\n            </sw-entity-listing>\n        </template>\n    </sw-page>\n{% endblock %}\n'},"1KLs":function(e,t){e.exports='<div class="cms-element-styla-module-content-preview">\n    <img class="cms-element-styla-module-content-preview-image" :src="\'stylacmsintegrationplugin/administration/static/img/shopware-6-styla-module.png\' | asset"/>\n</div>\n'},"2LnI":function(e,t){e.exports='{% block styla_cmsintegration %}\n    <sw-page class="styla-cmsintegration-settings">\n        {% block styla_cmsintegration_header %}\n            <template #smart-bar-header>\n                <h2>\n                    {{ $tc(\'sw-settings.index.title\') }}\n                    <sw-icon name="small-arrow-medium-right" small></sw-icon>\n                    {{ $tc(\'styla-cms-integration-plugin.configuration.header\') }}\n                </h2>\n            </template>\n        {% endblock %}\n        {% block styla_cmsintegration_actions %}\n            <template #smart-bar-actions>\n                {% block styla_cmsintegration_actions_save %}\n                    <sw-button-process v-model="isSaveSuccessful"\n                                       class="sw-settings-login-registration__save-action"\n                                       variant="primary"\n                                       :isLoading="isLoading"\n                                       :disabled="isLoading"\n                                       @click="onSave">\n                        {{ $tc(\'global.default.save\') }}\n                    </sw-button-process>\n                {% endblock %}\n            </template>\n        {% endblock %}\n        {% block styla_cmsintegration_content %}\n            <template #content>\n                {% block styla_cmsintegration_content_card %}\n                    <sw-card-view>\n                        {% block styla_cmsintegration_content_card_channel_config %}\n                            <sw-sales-channel-config v-model="config"\n                                                     ref="configComponent"\n                                                     domain="StylaCmsIntegration.settings">\n                                {% block styla_cmsintegration_content_card_channel_config_sales_channel %}\n                                    <template #select="{ onInput, selectedSalesChannelId }">\n                                        {% block styla_cmsintegration_content_card_channel_config_sales_channel_card %}\n                                            <sw-card class="sw-card--grid"\n                                                     :title="$tc(\'global.entities.sales_channel\', 2)">\n                                                <div class="card-container">\n                                                    {% block styla_cmsintegration_content_card_channel_config_sales_channel_card_title %}\n                                                        <sw-single-select v-model="selectedSalesChannelId"\n                                                                          labelProperty="translated.name"\n                                                                          valueProperty="id"\n                                                                          :isLoading="isLoading"\n                                                                          :options="salesChannels"\n                                                                          @change="onInput">\n                                                        </sw-single-select>\n                                                    {% endblock %}\n                                                </div>\n                                            </sw-card>\n                                        {% endblock %}\n                                    </template>\n                                {% endblock %}\n                                {% block styla_cmsintegration_content_card_channel_config_cards %}\n                                    <template #content="{ actualConfigData, allConfigs, selectedSalesChannelId }">\n                                        <div v-if="actualConfigData">\n                                            {% block styla_cmsintegration_content_card_channel_config_accounts %}\n                                                <styla-cms-integration-settings-accounts\n                                                    :actualConfigData="actualConfigData"\n                                                    :allConfigs="allConfigs"\n                                                    :selectedSalesChannelId="selectedSalesChannelId"\n                                                    :defaultAccountNameErrorState="defaultAccountNameErrorState"\n                                                    :defaultAccountNameFilled="defaultAccountNameFilled">\n                                                </styla-cms-integration-settings-accounts>\n                                            {% endblock %}\n                                            {% block styla_cmsintegration_content_card_channel_config_general %}\n                                                <styla-cms-integration-settings-general\n                                                    :actualConfigData="actualConfigData"\n                                                    :allConfigs="allConfigs"\n                                                    :selectedSalesChannelId="selectedSalesChannelId">\n                                                </styla-cms-integration-settings-general>\n                                            {% endblock %}\n                                        </div>\n                                    </template>\n                                {% endblock %}\n                            </sw-sales-channel-config>\n                        {% endblock %}\n                        {% block styla_cmsintegration_content_card_loading %}\n                            <sw-loader v-if="isLoading"></sw-loader>\n                        {% endblock %}\n                    </sw-card-view>\n                {% endblock %}\n            </template>\n        {% endblock %}\n    </sw-page>\n{% endblock %}\n'},CIZF:function(e){e.exports=JSON.parse('{"styla-cms-integration-plugin":{"configuration":{"label":"Styla CMS Integration","header":"Styla CMS Integration plugin Settings","group":{"general":{"title":"General Settings"},"accounts":{"title":"Account Settings"}},"field":{"accountNames":{"default":{"label":"Default account name","error":{"empty":"Default account name is required"}},"language_specific_account_name":{"label":"{name} account name"}},"extraPages":{"label":"List of Shopware paths the plugin can override","helpText":"The plugin per default can only take over the home page and category pages\' paths.\\nIf you publish pages with matching paths (blank path for the home page) in Styla Editor then the plugin will display the Styla content on these Shopware paths.\\nIf you want to achieve this for other Shopware paths (like a PDP) then you need to add it on the list below, each one in a new row.\\nExamples:\\n/foo-example-path/\\n/foo-example-path/bar-example-path/"},"syncInterval":{"label":"Interval of the pages list synchronization (in minutes)","helpText":"This setting defines how often the plugin checks Styla API for page updates. You can see these updates in the Content > Styla CMS > Styla Pages tab. The lower the value the more Shopware resources will be used. The minimum value is 1 minute. The default is 10 minutes."},"pageCache":{"label":"Page details cache lifetime (in seconds)","helpText":"This setting defines for how long Shopware caches Styla page content. The lower the value the more Shopware resources will be used. The minimum value is 1 second. The default is 3600 seconds (one hour)."}}},"blocks":{"module-content":{"label":"Styla Modular Content"}},"element":{"module-content":{"text":"Styla Modular Content, id: \\"{id}\\"","label":"Styla Modular Content","configuration":{"slot-id":{"label":"Slot Id (assigned at https://editor.styla.com/)"}}}},"page":{"listing":{"title":"Styla Pages","description":"List of Styla Pages","grid":{"column":{"title":"Page title","path":"Page path","account-name":"Account name","created-at":"Created at"}}}},"actions":{"schedule-pages-synchronization":{"button":{"label":"Schedule pages synchronization"},"message":{"success":"Pages synchronization scheduled","failed":"Failed to schedule pages synchronization","is-running":"Pages synchronization was not scheduled because another synchronization is already running","was-not-scheduled":"Pages synchronization was not scheduled"}},"refresh-page-details":{"button":{"label":"Refresh page details"},"message":{"success":"Page details refreshed","failed":"Failed to refresh page details","page-not-found":"Page with such name was not found. Please schedule pages synchronization (button above)","scheduled":"Page details refresh scheduled"}},"get-last-success-date":{"not_available":"N/A","text":"Last successful synchronization: \\"{dateTime}\\"","message":{"failed":"Failed to fetch last successful synchronization date"}}},"menu":{"title":"Styla CMS"}}}')},CXHj:function(e,t){e.exports='{% block styla_cmsintegration_content_card_channel_config_accounts_card %}\n    <sw-card class="sw-card--grid"\n             :title="$tc(\'styla-cms-integration-plugin.configuration.group.general.title\')">\n\n        {% block styla_cmsintegration_content_card_channel_config_accounts_card_container %}\n            <sw-container>\n\n                {% block styla_cmsintegration_content_card_channel_config_accounts_card_container_settings %}\n                    <div v-if="actualConfigData" class="card-container">\n\n                        {% block styla_cmsintegration_content_card_channel_config_pages %}\n                            <sw-inherit-wrapper v-model="actualConfigData[\'StylaCmsIntegration.settings.extraPagesAllowedToOverride\']"\n                                                :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'StylaCmsIntegration.settings.extraPagesAllowedToOverride\']"\n                                                :customInheritationCheckFunction="checkTextFieldInheritance">\n                                <template #content="props">\n                                    <sw-textarea-field name="StylaCmsIntegration.settings.extraPagesAllowedToOverride"\n                                                       :mapInheritance="props"\n                                                       :label="$tc(\'styla-cms-integration-plugin.configuration.field.extraPages.label\')"\n                                                       :helpText="$tc(\'styla-cms-integration-plugin.configuration.field.extraPages.helpText\')"\n                                                       :disabled="props.isInherited"\n                                                       :value="props.currentValue"\n                                                       @change="props.updateCurrentValue">\n                                    </sw-textarea-field>\n                                </template>\n                            </sw-inherit-wrapper>\n                        {% endblock %}\n                        {% block styla_cmsintegration_content_card_channel_config_interval %}\n                            <sw-inherit-wrapper v-model="actualConfigData[\'StylaCmsIntegration.settings.pagesListSynchronizationInterval\']"\n                                                :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'StylaCmsIntegration.settings.pagesListSynchronizationInterval\']">\n                                <template #content="props">\n                                    <sw-field name="StylaCmsIntegration.settings.pagesListSynchronizationInterval"\n                                              type="number"\n                                              number-type="int"\n                                              :min="1"\n                                              :mapInheritance="props"\n                                              :label="$tc(\'styla-cms-integration-plugin.configuration.field.syncInterval.label\')"\n                                              :helpText="$tc(\'styla-cms-integration-plugin.configuration.field.syncInterval.helpText\')"\n                                              :disabled="props.isInherited"\n                                              :value="props.currentValue"\n                                              :required="true"\n                                              @change="props.updateCurrentValue">\n                                    </sw-field>\n                                </template>\n                            </sw-inherit-wrapper>\n                        {% endblock %}\n                        {% block styla_cmsintegration_content_card_channel_config_cache_lifetime %}\n                            <sw-inherit-wrapper v-model="actualConfigData[\'StylaCmsIntegration.settings.pageCacheDuration\']"\n                                                :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'StylaCmsIntegration.settings.pageCacheDuration\']">\n                                <template #content="props">\n                                    <sw-field name="StylaCmsIntegration.settings.pageCacheDuration"\n                                              type="number"\n                                              number-type="int"\n                                              :min="1"\n                                              :mapInheritance="props"\n                                              :label="$tc(\'styla-cms-integration-plugin.configuration.field.pageCache.label\')"\n                                              :helpText="$tc(\'styla-cms-integration-plugin.configuration.field.pageCache.helpText\')"\n                                              :disabled="props.isInherited"\n                                              :value="props.currentValue"\n                                              :required="true"\n                                              @change="props.updateCurrentValue">\n                                    </sw-field>\n                                </template>\n                            </sw-inherit-wrapper>\n                        {% endblock %}\n\n                    </div>\n                {% endblock %}\n            </sw-container>\n        {% endblock %}\n\n    </sw-card>\n{% endblock %}\n'},EAKw:function(e,t,n){var a=n("PKoh");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("0545762a",a,!0,{})},JXqQ:function(e,t,n){"use strict";n.r(t);var a=n("ycaa"),i=n.n(a);Shopware.Component.register("cms-block-styla-module-content",{template:i.a});var s=n("V2C8"),o=n.n(s);n("liVl");Shopware.Component.register("cms-block-styla-module-content-preview",{template:o.a}),Shopware.Service("cmsService").registerCmsBlock({name:"styla-module-content",category:"text",label:"styla-cms-integration-plugin.blocks.module-content.label",component:"cms-block-styla-module-content",previewComponent:"cms-block-styla-module-content-preview",defaultConfig:{},slots:{content:{type:"styla-module-content"}}});var l=n("uVjt"),r=n.n(l),c=(n("EAKw"),Shopware),u=c.Component,d=c.Mixin;u.register("cms-element-styla-module-content",{template:r.a,mixins:[d.getByName("cms-element")],created:function(){this.createdComponent()},methods:{createdComponent:function(){this.initElementConfig("styla-module-content")}}});var g=n("udjz"),p=n.n(g),h=Shopware,m=h.Component,f=h.Mixin;m.register("cms-element-styla-module-content-config",{template:p.a,mixins:[f.getByName("cms-element")],created:function(){this.createdComponent()},methods:{createdComponent:function(){this.initElementConfig("styla-module-content")}}});var y=n("1KLs"),v=n.n(y);n("s7Bz");Shopware.Component.register("cms-element-styla-module-content-preview",{template:v.a}),Shopware.Service("cmsService").registerCmsElement({name:"styla-module-content",label:"styla-cms-integration-plugin.element.module-content.label",component:"cms-element-styla-module-content",configComponent:"cms-element-styla-module-content-config",previewComponent:"cms-element-styla-module-content-preview",defaultConfig:{slotId:{source:"static",value:"",required:!0},enableCaching:{source:"static",value:!1}}});var b=n("2LnI"),S=n.n(b),_=(n("bVAo"),Shopware),C=_.Component,w=_.Defaults,k=Shopware.Data.Criteria;C.register("styla-cms-integration-settings",{template:S.a,inject:["repositoryFactory"],data:function(){return{isLoading:!1,isSaveSuccessful:!1,defaultAccountNameFilled:!1,messageAccountBlankErrorState:null,config:null,salesChannels:[]}},metaInfo:function(){return{title:this.$createTitle()}},created:function(){this.createdComponent()},computed:{salesChannelRepository:function(){return this.repositoryFactory.create("sales_channel")},defaultAccountNameErrorState:function(){return this.defaultAccountNameFilled?null:this.messageAccountBlankErrorState},hasError:function(){return!this.defaultAccountNameFilled}},watch:{config:{handler:function(){var e=this.$refs.configComponent.allConfigs.null,t=this.$refs.configComponent.selectedSalesChannelId;this.defaultAccountNameFilled=null===t?!!this.config["StylaCmsIntegration.settings.defaultAccountName"]:!!this.config["StylaCmsIntegration.settings.defaultAccountName"]||!!e["StylaCmsIntegration.settings.defaultAccountName"]},deep:!0}},methods:{createdComponent:function(){var e=this;this.isLoading=!0;var t=new k;t.addFilter(k.equalsAny("typeId",[w.storefrontSalesChannelTypeId,w.apiSalesChannelTypeId])),this.salesChannelRepository.search(t,Shopware.Context.api).then((function(t){t.add({id:null,translated:{name:e.$tc("sw-sales-channel-switch.labelDefaultOption")}}),e.salesChannels=t})).finally((function(){e.isLoading=!1})),this.messageAccountBlankErrorState={code:1,detail:this.$tc("styla-cms-integration-plugin.configuration.field.accountNames.default.error.empty")}},onSave:function(){this.hasError||this.save()},save:function(){var e=this;this.isLoading=!0,this.$refs.configComponent.save().then((function(){e.isSaveSuccessful=!0})).finally((function(){e.isLoading=!1}))}}});var I=n("/z1L"),x=n.n(I),A=Shopware,N=A.Component,P=A.Mixin,z=Shopware.Data.Criteria,T=Shopware.Utils.format.date;N.register("styla-cms-integration-page-listing",{template:x.a,inject:["repositoryFactory","stylaPageApiService","stylaSynchronizationApiService","systemConfigApiService"],mixins:[P.getByName("notification")],data:function(){return{repository:null,pages:null,lastSuccessSynchronizationDate:null,scheduleSynchronizationSuccess:!1,scheduleSynchronizationProcessing:!1}},metaInfo:function(){return{title:this.$createTitle()}},computed:{columns:function(){return this.getColumns()}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var e=this;this.repository=this.repositoryFactory.create("styla_cms_page"),this.domainsRepository=this.repositoryFactory.create("sales_channel_domain");var t=new z;t.addSorting(z.sort("createdAt","ASC")),t.addFilter(z.equals("salesChannel.typeId","8a243080f92e4c719546314b577cf82b"));var n=this.domainsRepository.search(t,Shopware.Context.api);n.then((function(t){e.domainsList=t}));var a=this.systemConfigApiService.getValues("StylaCmsIntegrationPlugin");a.then((function(t){e.settings=t}));var i=null,s=this.repository.search(new z,Shopware.Context.api);s.then((function(e){i=e})),Promise.all([s,a,n]).then((function(){e.pages=i})),this.stylaSynchronizationApiService.getLastSuccessSynchronizationDate().then((function(t){t.data.result?e.lastSuccessSynchronizationDate=T(t.data.result,{hour:"2-digit",minute:"2-digit"}):e.lastSuccessSynchronizationDate=e.$tc("styla-cms-integration-plugin.actions.get-last-success-date.not_available")})).catch((function(t){console.error("Failed to get last success synchronization date",t),e.createNotificationError({message:e.$tc("styla-cms-integration-plugin.actions.get-last-success-date.message.failed")})}))},getColumns:function(){return[{property:"title",label:this.$tc("styla-cms-integration-plugin.page.listing.grid.column.title"),allowResize:!0,primary:!0},{property:"path",label:this.$tc("styla-cms-integration-plugin.page.listing.grid.column.path"),allowResize:!0},{property:"accountName",label:this.$tc("styla-cms-integration-plugin.page.listing.grid.column.account-name"),allowResize:!0},{property:"createdAt",label:this.$tc("styla-cms-integration-plugin.page.listing.grid.column.created-at"),allowResize:!0}]},scheduleSynchronization:function(){this.stylaPageApiService.scheduleSynchronization().then(function(e){e.data.isScheduled?this.createNotificationSuccess({message:this.$tc("styla-cms-integration-plugin.actions.schedule-pages-synchronization.message.success")}):"SYNCHRONIZATION_IS_ALREADY_RUNNING"===e.data.errorCode?this.createNotificationWarning({message:this.$tc("styla-cms-integration-plugin.actions.schedule-pages-synchronization.message.is-running")}):this.createNotificationWarning({message:this.$tc("styla-cms-integration-plugin.actions.schedule-pages-synchronization.message.was-not-scheduled")})}.bind(this)).catch(function(e){void 0!==e.response.data.errorCode&&console.error("Failed to schedule styla pages synchronization, error code: "+e.response.data.errorCode),this.createNotificationError({message:this.$tc("styla-cms-integration-plugin.actions.schedule-pages-synchronization.message.failed")})}.bind(this))},refreshPageDetails:function(e){var t=this.stylaPageApiService.refreshPageDetails(e.id);this.createNotificationInfo({message:this.$tc("styla-cms-integration-plugin.actions.refresh-page-details.message.scheduled")}),t.then(function(e){e.data.isSuccess?this.createNotificationSuccess({message:this.$tc("styla-cms-integration-plugin.actions.refresh-page-details.message.success")}):"PAGE_NOT_FOUND"===e.data.errorCode?this.createNotificationWarning({message:this.$tc("styla-cms-integration-plugin.actions.refresh-page-details.message.page-not-found")}):this.createNotificationError({message:this.$tc("styla-cms-integration-plugin.actions.refresh-page-details.failed")})}.bind(this)).catch(function(e){void 0!==e.response.data.errorCode&&console.error("Failed to refresh styla page details, error code: "+e.response.data.errorCode),this.createNotificationError({message:this.$tc("styla-cms-integration-plugin.actions.refresh-page-details.message.failed")})}.bind(this))},computePathLink:function(e){if(0===this.domainsList.length)return null;if(this.pagesPathHashMap&&this.pagesPathHashMap[e.id])return this.pagesPathHashMap[e.id];var t=null,n=this.settings["StylaCmsIntegrationPlugin.config.accountNames"];for(var a in n)if(e.accountName===n[a]){t=a;break}var i=null;t&&"default"!==t&&(i=this.domainsList.find((function(e){return e.languageId===t}))),i||(i=this.domainsList[0]);var s=""+e.path,o=i.url.replace(/\/$/,"")+"/"+s.replace(/^\//,"");return this.pagesPathHashMap||(this.pagesPathHashMap={}),this.pagesPathHashMap[e.id]=o,o},resetScheduleSynchronizationState:function(){this.scheduleSynchronizationSuccess=!1,this.scheduleSynchronizationProcessing=!1}}});var L=n("OFqn"),D=n.n(L);Shopware.Component.register("styla-plugin-settings-icon",{template:D.a});var $=n("KED3"),E=n.n($),M=Shopware.Component,F=Shopware.Data.Criteria;M.register("styla-cms-integration-settings-accounts",{template:E.a,inject:["repositoryFactory"],props:{actualConfigData:{type:Object,required:!0},allConfigs:{type:Object,required:!0},selectedSalesChannelId:{type:String,required:!1,default:null},defaultAccountNameErrorState:{type:Object,required:!1,default:null},defaultAccountNameFilled:{type:Boolean,required:!0}},data:function(){return{configPath:"StylaCmsIntegration.settings.accountNames",isLoading:!1,systemLanguages:[]}},created:function(){this.createdComponent()},computed:{languageRepository:function(){return this.repositoryFactory.create("language")},accountNames:{get:function(){return this.allConfigs[this.selectedSalesChannelId]["StylaCmsIntegration.settings.accountNames"]}}},methods:{createdComponent:function(){var e=this;this.isLoading=!0;var t=new F;t.addSorting(F.sort("createdAt","ASC")),this.languageRepository.search(t,Shopware.Context.api).then((function(t){e.systemLanguages=t,e.initLanguageConfig()})).finally((function(){e.isLoading=!1}))},initLanguageConfig:function(){void 0===this.allConfigs[this.selectedSalesChannelId][this.configPath]&&this.$set(this.allConfigs[this.selectedSalesChannelId],"StylaCmsIntegration.settings.accountNames",{})},checkTextFieldInheritance:function(e){return"string"!=typeof e||e.length<=0}}});var j=n("CXHj"),O=n.n(j);function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var a,i,s=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(s.push(a.value),!t||s.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}Shopware.Component.register("styla-cms-integration-settings-general",{template:O.a,props:{actualConfigData:{type:Object,required:!0},allConfigs:{type:Object,required:!0},selectedSalesChannelId:{type:String,required:!1,default:null}},created:function(){this.createdComponent()},methods:{createdComponent:function(){for(var e="StylaCmsIntegration.settings.",t=0,n=Object.entries({pagesListSynchronizationInterval:10,pageCacheDuration:3600});t<n.length;t++){var a=V(n[t],2),i=a[0],s=a[1];void 0===this.allConfigs.null[e+i]&&this.$set(this.allConfigs.null,e+i,s)}},checkTextFieldInheritance:function(e){return"string"!=typeof e||e.length<=0}}});var q=n("CIZF");Shopware.Module.register("styla-cms-integration",{type:"plugin",name:"styla-cms-integration",title:"styla-cms-integration-plugin.configuration.label",description:"styla-cms-integration-plugin.page.listing.description",color:"#ffd53d",icon:"small-default-stack-line2",snippets:{"en-GB":q},routes:{settings:{component:"styla-cms-integration-settings",path:"settings",meta:{parentPath:"sw.settings.index.plugins"}},"pages-list":{component:"styla-cms-integration-page-listing",path:"styla/page"}},navigation:[{id:"styla-cms-integration-general",label:"styla-cms-integration-plugin.menu.title",color:"#ffd53d",icon:"small-default-stack-line2",parent:"sw-content",position:100},{label:"styla-cms-integration-plugin.page.listing.title",color:"#77ff3d",icon:"small-default-stack-line2",path:"styla.cms.integration.pages-list",parent:"styla-cms-integration-general",position:100}],settingsItem:{group:"plugins",to:"styla.cms.integration.settings",iconComponent:"styla-plugin-settings-icon",backgroundEnabled:!0}});var R,H=(R=n("M24T")).keys().reduce((function(e,t){var n={name:t.split(".")[1].split("/")[1],functional:!0,render:function(e,n){var a=n.data;return e("span",{class:[a.staticClass,a.class],style:a.style,attrs:a.attrs,on:a.on,domProps:{innerHTML:R(t)}})}};return e.push(n),e}),[]),U=Shopware.Component;H.map((function(e){return U.register(e.name,e)}));function Z(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var G=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.httpClient=t,this.loginService=n,this.name="stylaPageApiService"}var t,n,a;return t=e,(n=[{key:"scheduleSynchronization",value:function(){var e=this.getHeaders();return this.httpClient.post("/styla/page/_action/schedule-pages-synchronization",{},{headers:e})}},{key:"refreshPageDetails",value:function(e){var t=this.getHeaders();return this.httpClient.post("/styla/page/_action/refresh-details/"+e,{},{headers:t})}},{key:"getHeaders",value:function(){return{Accept:"application/json",Authorization:"Bearer ".concat(this.loginService.getToken()),"Content-Type":"application/json"}}}])&&Z(t.prototype,n),a&&Z(t,a),e}();function K(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Shopware.Service().register("stylaPageApiService",(function(e){var t=Shopware.Application.getContainer("init");return new G(t.httpClient,e.loginService)}));var W=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.httpClient=t,this.loginService=n,this.name="stylaPageApiService"}var t,n,a;return t=e,(n=[{key:"getLastSuccessSynchronizationDate",value:function(){var e=this.getHeaders();return this.httpClient.get("/styla/synchronization/page/_action/get_last_success_date_time",{},{headers:e})}},{key:"getHeaders",value:function(){return{Accept:"application/json",Authorization:"Bearer ".concat(this.loginService.getToken()),"Content-Type":"application/json"}}}])&&K(t.prototype,n),a&&K(t,a),e}();Shopware.Service().register("stylaSynchronizationApiService",(function(e){var t=Shopware.Application.getContainer("init");return new W(t.httpClient,e.loginService)}))},KED3:function(e,t){e.exports='{% block styla_cmsintegration_content_card_channel_config_accounts_card %}\n    <sw-card class="sw-card--grid"\n             :title="$tc(\'styla-cms-integration-plugin.configuration.group.accounts.title\')">\n\n        {% block styla_cmsintegration_content_card_channel_config_accounts_card_container %}\n            <sw-container>\n\n                {% block styla_cmsintegration_content_card_channel_config_accounts_card_container_settings %}\n                    <div v-if="actualConfigData" class="card-container">\n\n                        {% block styla_cmsintegration_content_card_channel_config_accounts_card_container_settings_default %}\n                            <sw-inherit-wrapper v-model="actualConfigData[\'StylaCmsIntegration.settings.defaultAccountName\']"\n                                                :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'StylaCmsIntegration.settings.defaultAccountName\']"\n                                                :customInheritationCheckFunction="checkTextFieldInheritance">\n                                <template #content="props">\n                                    <sw-text-field name="StylaCmsIntegration.settings.defaultAccountName"\n                                                   :mapInheritance="props"\n                                                   :label="$tc(\'styla-cms-integration-plugin.configuration.field.accountNames.default.label\')"\n                                                   :disabled="props.isInherited"\n                                                   :value="props.currentValue"\n                                                   :error="defaultAccountNameErrorState"\n                                                   :required="true"\n                                                   @change="props.updateCurrentValue">\n                                    </sw-text-field>\n                                </template>\n                            </sw-inherit-wrapper>\n                        {% endblock %}\n\n                        {% block styla_cmsintegration_content_card_channel_config_accounts_card_container_settings_language_accounts %}\n                            <template v-for="language in systemLanguages">\n\n                                <sw-inherit-wrapper v-model="accountNames[language.id]"\n                                                    :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'StylaCmsIntegration.settings.accountNames\'][language.id]"\n                                                    :customInheritationCheckFunction="checkTextFieldInheritance">\n                                    <template #content="props">\n                                        <sw-text-field :mapInheritance="props"\n                                                       :label="$tc(\'styla-cms-integration-plugin.configuration.field.accountNames.language_specific_account_name.label\', 0, { name: language.name })"\n                                                       :disabled="props.isInherited"\n                                                       :value="props.currentValue"\n                                                       @change="props.updateCurrentValue">\n                                        </sw-text-field>\n                                    </template>\n                                </sw-inherit-wrapper>\n\n                            </template>\n                        {% endblock %}\n\n                    </div>\n                {% endblock %}\n            </sw-container>\n        {% endblock %}\n\n        {% block styla_cmsintegration_content_card_channel_config_accounts_card_loading %}\n            <sw-loader v-if="isLoading"></sw-loader>\n        {% endblock %}\n\n    </sw-card>\n{% endblock %}\n'},M24T:function(e,t,n){var a={"./icons-styla-plugin-settings.svg":"NOfQ"};function i(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=s,e.exports=i,i.id="M24T"},"N5N+":function(e,t,n){},NOfQ:function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="84.000000pt" height="84.000000pt" viewBox="0 0 84.000000 84.000000" preserveAspectRatio="xMidYMid meet"><g transform="translate(0.000000,84.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none"><path d="M280 690 l0 -30 190 0 190 0 0 30 0 30 -190 0 -190 0 0 -30z"></path><path d="M137 573 c-4 -3 -7 -19 -7 -35 l0 -28 180 0 180 0 0 35 0 35 -173 0 c-96 0 -177 -3 -180 -7z"></path><path d="M228 430 l-5 -30 194 0 193 0 0 30 0 30 -189 0 -189 0 -4 -30z"></path><path d="M340 300 l0 -30 180 0 180 0 0 30 0 30 -180 0 -180 0 0 -30z"></path><path d="M180 155 l0 -35 195 0 195 0 0 35 0 35 -195 0 -195 0 0 -35z"></path></g></svg>'},OFqn:function(e,t){e.exports='{% block styla_plugin_settings_icon %}\n    <sw-icon name="styla-plugin-settings"></sw-icon>\n{% endblock %}\n'},PKoh:function(e,t,n){},SZ7m:function(e,t,n){"use strict";function a(e,t){for(var n=[],a={},i=0;i<t.length;i++){var s=t[i],o=s[0],l={id:e+":"+i,css:s[1],media:s[2],sourceMap:s[3]};a[o]?a[o].parts.push(l):n.push(a[o]={id:o,parts:[l]})}return n}n.r(t),n.d(t,"default",(function(){return h}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},o=i&&(document.head||document.getElementsByTagName("head")[0]),l=null,r=0,c=!1,u=function(){},d=null,g="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,i){c=n,d=i||{};var o=a(e,t);return m(o),function(t){for(var n=[],i=0;i<o.length;i++){var l=o[i];(r=s[l.id]).refs--,n.push(r)}t?m(o=a(e,t)):o=[];for(i=0;i<n.length;i++){var r;if(0===(r=n[i]).refs){for(var c=0;c<r.parts.length;c++)r.parts[c]();delete s[r.id]}}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t],a=s[n.id];if(a){a.refs++;for(var i=0;i<a.parts.length;i++)a.parts[i](n.parts[i]);for(;i<n.parts.length;i++)a.parts.push(y(n.parts[i]));a.parts.length>n.parts.length&&(a.parts.length=n.parts.length)}else{var o=[];for(i=0;i<n.parts.length;i++)o.push(y(n.parts[i]));s[n.id]={id:n.id,refs:1,parts:o}}}}function f(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function y(e){var t,n,a=document.querySelector("style["+g+'~="'+e.id+'"]');if(a){if(c)return u;a.parentNode.removeChild(a)}if(p){var i=r++;a=l||(l=f()),t=S.bind(null,a,i,!1),n=S.bind(null,a,i,!0)}else a=f(),t=_.bind(null,a),n=function(){a.parentNode.removeChild(a)};return t(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;t(e=a)}else n()}}var v,b=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function S(e,t,n,a){var i=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var s=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function _(e,t){var n=t.css,a=t.media,i=t.sourceMap;if(a&&e.setAttribute("media",a),d.ssrId&&e.setAttribute(g,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},V2C8:function(e,t){e.exports='<div>\n    <img class="cms-block-styla-module-content-preview-image" :src="\'stylacmsintegrationplugin/administration/static/img/shopware-6-styla-module.png\' | asset"/>\n</div>\n'},ZbBV:function(e,t,n){},bVAo:function(e,t,n){var a=n("ZbBV");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("3fe07938",a,!0,{})},iGWt:function(e,t,n){},liVl:function(e,t,n){var a=n("N5N+");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("b9e33d74",a,!0,{})},s7Bz:function(e,t,n){var a=n("iGWt");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("eac23716",a,!0,{})},uVjt:function(e,t){e.exports="<div class=\"cms-element-styla-module-content\">\n    <h2>\n        {{ $tc('styla-cms-integration-plugin.element.module-content.text', 0, {'id': element.config.slotId.value}) }}\n    </h2>\n</div>\n"},udjz:function(e,t){e.exports='{% block style_element_config_base %}\n    <sw-field v-model="element.config.slotId.value"\n              :label="$tc(\'styla-cms-integration-plugin.element.module-content.configuration.slot-id.label\')">\n    </sw-field>\n\n    <sw-switch-field label="Enable caching" v-model="element.config.enableCaching.value"></sw-switch-field>\n{% endblock %}'},ycaa:function(e,t){e.exports='<div class="cms-block-styla-module-content">\n    <slot name="content">\n    </slot>\n</div>\n'}});